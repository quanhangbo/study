<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>upload模块快速使用</title>
    <link rel="stylesheet" href="layui/css/layui.css" media ="all">
</head>
<body>

<button type="button" class="layui-btn" id="test1">
    <i class="layui-icon">&#xe67c;</i>上传图片
</button>

<script src="layui/layui.js" ></script>
<script>
    layui.use('upload', function(){
        var upload = layui.upload;

        //执行实例
        //创建一个上传组件
        var uploadInst = upload.render({
            elem: '#test1' //绑定元素
            ,url: '/upload/' //上传接口
            //上传后的回调
            ,done: function(res,index,upload){
                //获取当前触发上传的元素，一般用于elem绑定class的情况
                var item = this.item;
                //上传完毕回调
            },
            accept:'file'//允许上传的文件类型
            ,size:1024*2//最大允许上传的文件大小
            ,error: function(){
                //请求异常回调
            }
            ,progress: function(n, elem, res, index){
                var percent = n + '%' //获取进度百分比
                element.progress('demo', percent); //可配合 layui 进度条元素使用

                console.log(elem); //得到当前触发的元素 DOM 对象。可通过该元素定义的属性值匹配到对应的进度条。
                console.log(res); //得到 progress 响应信息
                console.log(index); //得到当前上传文件的索引，多文件上传时的进度条控制，如：
                element.progress('demo-'+ index, n + '%'); //进度条
            }
        });
    });
</script>
</body>
</html>